<div>google雲端硬碟list測試</div>
<button onclick="list()">list</button>
<script>
var id='1N__5vR2pwHDNDgTic7DHPSjr44lo3W5f'
 function list(){
  var token ='ya29.a0AfB_byA-tsbRwdx8Nky5WGHOE71N2BYiQBTLRZzOAVM7GgL-HyR8HgQWQwS4Xdvy1kizNAnEBQ5HhWnV_e33oU1kidRvsERT6_6z8jKFiY_3mEShUM0Wl-HrD3B1udp9mGT0EAVffTy2JNY2YwdPtCkK7SsxlPps0U_JaCgYKAYgSARASFQHGX2MiwD6wa73Wal2a3i2yNmslvw0171'
  var xhr=new XMLHttpRequest()
loop()
  function loop(){
  xhr.open('GET',`https://www.googleapis.com/drive/v3/files?q='${id}' in parents and trashed=false&orderBy=folder&fields=nextPageToken,files(mimeType,name)&pageSize=5&pageToken=~!!~AI9FV7T-wjnivxSx8Kuc4lGtaFidofLCbmHHraPq17TSAluVPLV2FdH1Es17XfESbOUMaKYyRsABcLktvAeKjdEuPtNqar5pq_NHdfyI7dYsgAV0FRDAtBTJF7vjv3h1b_FYLVe0-T_nGKoQpmzmWOSDn31QQIB9hOonLdKnvK9Q9ZZDSWDbiE-xuyw0fr2YJ9ooyHOoN9irHhCBQOTx9f6NfGePvO9plKOxTMDtSFvsKxGXck0W0WQu0ByQ47veWtVNLe3_uC5-CulVx-ZpqOBSkrh-FNpG6njMDE60i0dxkhuiQB6sJOoD2o7_R_nEZqKQMN8XfBNgdctrk9Z2zOinFllgOMSN4Ix4oOooFndHBqt1hUmTrXoViiDl7DjmP6S-y87usj2GuxltTVhJcHcIGtOSKYpNgQ==`,true)
  //xhr.open('GET',`https://www.googleapis.com/drive/v3/files?q='${id}'+in+parents+and+trashed=false&orderBy=folder&pageSize=1000`,true)
  xhr.responseType='json'
  xhr.setRequestHeader('Authorization','Bearer '+token)
  xhr.send()
  xhr.onload=()=>{
   console.log('onload',xhr.response)
   /*const arr=xhr.response.files
   let foldersCount=arr.findIndex(item=>item.mimeType!='application/vnd.google-apps.folder')
   if(foldersCount==-1)foldersCount=arr.length
   let filesCount=arr.length-foldersCount
   const foldersObj={},filesObj={}
   const foldersArr=[],filesArr=[]
   arr.forEach((item,index)=>{
    if(index<foldersCount)
    {if(foldersArr.includes(item.name)){foldersObj[item.name]=foldersObj[item.name]?++foldersObj[item.name]:1}else{foldersArr.push(item.name)}}
    else
    {if(filesArr.includes(item.name)){filesObj[item.name]=filesObj[item.name]?++filesObj[item.name]:1}else{filesArr.push(item.name)}}
   })
   
   console.log(
`資料夾:${foldersCount}個
檔案:${filesCount}個
重複資料夾：${JSON.stringify(foldersObj)}
  重複檔案：${JSON.stringify(filesObj)}`)*/
}

 }//loop()
 }


</script>