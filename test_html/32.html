<button onclick="create()">轉建</button>
<script>
var token='ya29.a0AfB_byBMiCJAk8zQB67vQ4EWR3jVQma6-zpTKlsQEBiT7EFKWD_mg9Fdy3B1laFhzXannoJPobGbLFXYZky0iguvpkiMKvR7GWs4LzoMLXE2C0hQPqJBpKQyie3ONNNFMgdLiPOV_dgVYZYB2PCtt_NAY21TbT0D2UtUaCgYKAa4SARMSFQHGX2MiXBC7A-1lnKsqLPESEYww3Q0171'
var id='1h2YMm3fNzZI-xHWdiQph4xRCy6SCfQ8L'
const create=async()=>{
 let res=await fetch(`https://www.googleapis.com/drive/v2/files/${id}`,{headers:{'Authorization':'Bearer '+token}})
 let body=await res.json()
 const {parents,modifiedDate}=body
 console.log(body,parents,modifiedDate)
 res=await fetch(`https://www.googleapis.com/drive/v2/files/${id}/copy`,{method:"POST",headers:{'Authorization':'Bearer '+'ya29.a0AfB_byAAoHt2dDnkN7dfXJYzKJ0i64_sQObqHfgNMCe-6C4BQL0Us22YddK8a-lhKPTwslM4vjTJJ9RUklJnPmTNdYEFvTUBmA5GFd_Ohhpo00YvimeYw3Guk8SLrS6Sljamz1wWSd8RzvPkLtH5RvraoM4_mYRJ4u4aCgYKAQQSARISFQHGX2Mihw5Rl-6cKe2oqCNmLEpygQ0170'
 ,'Content-Type':'application/json'},body:JSON.stringify({modifiedDate:modifiedDate,parents:parents})})
 body=await res.json()
 console.log(body)
}











//POST https://www.googleapis.com/drive/v2/files/1VMa2H9EPlSpIbjniiP2DUXp6UoNP3NjE/copy

/*
let num=prompt("onibg.00000@gmail.com","00000"),newOwnerMail='onibg.'+num.padStart(5,'0')+'@gmail.com'
 arr.forEach(async(element)=>{//https://gist.github.com/tanaikech/685929fd4e739c943ab0b4c53348a4af
                              let res=await fetch(`https://www.googleapis.com/drive/v2/files/${element}`,{headers:{'Authorization':'Bearer '+onibgObj[Gmail].token}})
                              let body=await res.json()
                              const thisMail=body.owners[0].emailAddress
                              const {modifiedDate}=body
                              res=await fetch(`https://www.googleapis.com/drive/v2/files/${element}/permissions`,{method:"POST",headers:{'Authorization':'Bearer '+onibgObj[thisMail].token,'Content-Type':'application/json'},body:JSON.stringify({role:'writer',type:'user',value:newOwnerMail,pendingOwner:true})})
                              body=await res.json()
                              res=await fetch(`https://www.googleapis.com/drive/v2/files/${element}/permissions`,{method:"POST",headers:{'Authorization':'Bearer '+onibgObj[newOwnerMail].token,'Content-Type':'application/json'},body:JSON.stringify({role:'owner',type:'user',value:newOwnerMail})})
                              //?moveToNewOwnersRoot=true
                              body=await res.json()
                              console.log(thisMail,body)
                              fetch(`https://www.googleapis.com/drive/v2/files/${element}?setModifiedDate=true`,{method:"PATCH",headers:{'Authorization':'Bearer '+onibgObj[newOwnerMail].token},body:JSON.stringify({modifiedDate:modifiedDate})})
                              fetch(`https://script.google.com/macros/s/AKfycbxHSWHtQg_qH-CSJGAbo5jUFqm6udTABUlweLugH1hpJVJnEo0/exec?editor=${newOwnerMail}$${element}`)//與我共用(v2internal?)
                            })
                            
                            */
</script>