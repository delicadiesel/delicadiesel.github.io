<button onclick="create()">轉建</button>
<script>
var token='ya29.a0AfB_byCSv1yJpDONmCLkM1rHWx8GSxACb6SqsnRQWYyWSspPtHOCL7ieHglr4w6IeA83UeDpHVD8hgmEIlw9biv90BwJlT5-R94v95z2xo4UIXiZxGROH7_MxAVBGeYJTQ5vg0eyMzOGEkBO95GghrQRrV3uqux2ny0PaCgYKAcoSARASFQHGX2MiTKkDgQ8gQCD96APQysxL1w0171'
var id='1VMa2H9EPlSpIbjniiP2DUXp6UoNP3NjE'
const create=async()=>{
 let res=await fetch(`https://www.googleapis.com/drive/v2/files/${id}`,{headers:{'Authorization':'Bearer '+token}})
 let body=await res.json()
 const {parents,modifiedDate}=body
 console.log(body,parents,modifiedDate)
 res=await fetch(`https://www.googleapis.com/drive/v2/files/${id}/copy`,{method:"POST",headers:{'Authorization':'Bearer '+token,'Content-Type':'application/json'},body:JSON.stringify({title:'test.jpg',modifiedDate:modifiedDate})})
 body=await res.json()
 console.log(body)
}











//POST https://www.googleapis.com/drive/v2/files/1VMa2H9EPlSpIbjniiP2DUXp6UoNP3NjE/copy

/*
let num=prompt("onibg.00000@gmail.com","00000"),newOwnerMail='onibg.'+num.padStart(5,'0')+'@gmail.com'
 arr.forEach(async(element)=>{//https://gist.github.com/tanaikech/685929fd4e739c943ab0b4c53348a4af
                              let res=await fetch(`https://www.googleapis.com/drive/v2/files/${element}`,{headers:{'Authorization':'Bearer '+onibgObj[Gmail].token}})
                              let body=await res.json()
                              const thisMail=body.owners[0].emailAddress
                              const {modifiedDate}=body
                              res=await fetch(`https://www.googleapis.com/drive/v2/files/${element}/permissions`,{method:"POST",headers:{'Authorization':'Bearer '+onibgObj[thisMail].token,'Content-Type':'application/json'},body:JSON.stringify({role:'writer',type:'user',value:newOwnerMail,pendingOwner:true})})
                              body=await res.json()
                              res=await fetch(`https://www.googleapis.com/drive/v2/files/${element}/permissions`,{method:"POST",headers:{'Authorization':'Bearer '+onibgObj[newOwnerMail].token,'Content-Type':'application/json'},body:JSON.stringify({role:'owner',type:'user',value:newOwnerMail})})
                              //?moveToNewOwnersRoot=true
                              body=await res.json()
                              console.log(thisMail,body)
                              fetch(`https://www.googleapis.com/drive/v2/files/${element}?setModifiedDate=true`,{method:"PATCH",headers:{'Authorization':'Bearer '+onibgObj[newOwnerMail].token},body:JSON.stringify({modifiedDate:modifiedDate})})
                              fetch(`https://script.google.com/macros/s/AKfycbxHSWHtQg_qH-CSJGAbo5jUFqm6udTABUlweLugH1hpJVJnEo0/exec?editor=${newOwnerMail}$${element}`)//與我共用(v2internal?)
                            })
                            
                            */
</script>