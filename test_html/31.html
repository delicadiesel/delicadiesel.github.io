<div>google雲端硬碟about測試</div>
<button onclick="about()">about</button>
<button onclick="list()">list</button>
<button onclick="unorganized()">is:unorganized owner:me</button>
<script>
var token='ya29.a0AfB_byAD7X6KEZxeRev6I9AUiZYS8ptLfUfmRE0yYzbcQRDRXFSVuo7X02jNgTf-CVWeXvLxtGOM47on6J-Vcupg26JAI7VfVc4KqXJHp1ADH0xgH7cmbHMfG3GfzkMB8oJt294mrEIeXArQAY4PtEgIgU6IdviJwbkaCgYKAYISARMSFQHGX2MiEL_1mU0fSVy7hAsYN8NqjA0170'
var xhr=new XMLHttpRequest()
function about(){
 xhr.open('GET',`https://www.googleapis.com/drive/v3/about?fields=storageQuota`,true)
 xhr.responseType='json'
 xhr.setRequestHeader('Authorization','Bearer '+token)
 xhr.send()
 xhr.onload=()=>{console.log('onload',xhr.response)}
}
function list(){
 xhr.open('GET',`https://www.googleapis.com/drive/v3/files?q='root' in parents and trashed=false&fields=files(mimeType,name)&pageSize=1000`,true)
 xhr.responseType='json'
 xhr.setRequestHeader('Authorization','Bearer '+token)
 xhr.send()
 xhr.onload=()=>{
  console.log(xhr.response.files,xhr.response.files.length)
 }
}

function unorganized(){
 xhr.open('GET',`https://www.googleapis.com/drive/v3/files?q='me' in owners and trashed=false&fields=files(mimeType,name,parents)&pageSize=1000`,true)
 xhr.responseType='json'
 xhr.setRequestHeader('Authorization','Bearer '+token)
 xhr.send()
 xhr.onload=()=>{
 //const result=xhr.response.files.filter(item =>!((item.name=='onibg'&&item.mimeType=='application/vnd.google-apps.script')||(item.parents&&item.parents[0]=='0Bxqf-PGnadp7aVUwX1N4RHBCRDg'&&item.mimeType=='video/x-matroska')))
 const result=xhr.response.files.filter(item =>(!item.parents)||(item.parents&&item.parents[0].length==19))
  
    console.log(xhr.response.files,result)
 }
}

</script>