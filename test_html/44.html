<script>
let url='https://www.googleapis.com/drive/v3/about'
const xhr=new XMLHttpRequest()
start()
function start(){
 xhr.open('GET',url,true)
 xhr.responseType='text'
 xhr.send()
 xhr.onreadystatechange=()=>{console.log(xhr.readyState,xhr.status)
  if(xhr.readyState==2&&xhr.status!=200){xhr.abort()}
  if(xhr.readyState==4&&xhr.status==0){url='https://api.ipify.org';start()}
 }
 xhr.onload=()=>{console.log('結果',xhr.response)}
}
//setTimeout(()=>{url='https://api.ipify.org';start()},3000)
setInterval(()=>console.log('hi'),1000)
</script>