<script>
let url='https://www.googleapis.com/drive/v3/about'
const xhr=new XMLHttpRequest()
start()
function start(){
 xhr.open('GET',url,true)
 xhr.responseType='text'
 xhr.send()
 xhr.onreadystatechange=()=>{console.log(xhr.readyState,xhr.status)
  if(xhr.readyState==2&&xhr.status!=200){xhr.abort();url='https://api.ipify.org';start()}
 }
 xhr.onload=()=>{console.log('結果',xhr.response)}
}
setInterval(()=>console.log('hi'),1000)

let ok=false
function test(){
 xhr.open('GET','https://api.ipify.org',true)
 //xhr.responseType='text'
 xhr.send()
 xhr.onload=()=>{
  console.log('測試',xhr.response)
  if(!ok){ok=true;test()}
 }
}

</script>